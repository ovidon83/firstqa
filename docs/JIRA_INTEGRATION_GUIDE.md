# Jira Integration Guide

## Overview

FirstQA now supports **complete Jira integration** with `/qa` command-based analysis, just like GitHub! Comment `/qa` on any Jira ticket to get AI-powered QA analysis.

## Features

‚úÖ **OAuth 2.0 Authentication** - Secure connection to Jira  
‚úÖ **Automatic Webhook Setup** - No manual configuration needed  
‚úÖ **Comment-Based Triggering** - Use `/qa` command in ticket comments  
‚úÖ **Full Ticket Analysis** - Analyzes description, comments, labels, priority  
‚úÖ **AI-Powered Insights** - Smart questions, risk areas, test scenarios  
‚úÖ **Automatic Comment Posting** - Results posted directly to the ticket  
‚úÖ **Dashboard History** - All analyses tracked and viewable  

## How to Use

### 1. Connect Jira

1. Go to https://www.firstqa.dev/dashboard/integrations
2. Click **"Connect Jira"**
3. Sign in with your Atlassian account
4. Grant permissions to FirstQA
5. ‚úÖ Done! Webhook is automatically created

### 2. Trigger Analysis

1. Go to any Jira ticket in your workspace
2. Add a comment: `/qa`
3. Wait ~10-15 seconds
4. ‚úÖ AI analysis will be posted as a comment!

### 3. View History

1. Go to https://www.firstqa.dev/dashboard/history
2. See all your Jira ticket analyses
3. Click any analysis to view the original ticket

## What Gets Analyzed?

FirstQA analyzes:
- **Ticket Description** - Main requirements and context
- **All Comments** - Team discussions and clarifications
- **Labels/Tags** - For context and categorization
- **Priority** - To assess urgency and risk
- **Issue Type** - Story, Bug, Task, Epic, etc.

## Analysis Output

The AI generates:

### üîç Smart Questions
- Missing requirements
- Edge cases to consider
- Clarifications needed before development

### ‚ö†Ô∏è Risk Areas
- Potential technical challenges
- Integration points to watch
- Security/performance concerns

### üß™ Test Scenarios
- Priority test cases
- Step-by-step test instructions
- Expected results
- Edge cases to test

### ‚úÖ Ready for Development Score
- 80-100%: Ready to start
- 60-79%: Needs minor clarification
- 0-59%: Needs more definition

## Example

**Jira Ticket:**
```
Title: Add user profile page
Description: Users should be able to view and edit their profile
Labels: frontend, user-management
Priority: High
```

**Comment:**
```
/qa
```

**AI Analysis Posted:**
```
ü§ñ FirstQA Analysis

Key Questions:
1. Should users be able to change their email address?
2. What profile fields are editable vs read-only?
3. Is there an avatar upload feature?
4. Do changes require email confirmation?

Risk Areas:
1. Email validation and uniqueness checks
2. Avatar file size limits and storage
3. Profile update permissions and auth
4. Data validation on frontend and backend

Test Scenarios:

1. Update Profile - Happy Path
   Priority: High
   Steps:
     1. Navigate to /profile
     2. Edit name field
     3. Click Save
   Expected: Profile updates successfully, confirmation shown

2. Invalid Email Format
   Priority: High
   Steps:
     1. Enter invalid email (e.g., "test@")
     2. Click Save
   Expected: Validation error shown, profile not updated

3. Upload Avatar - Large File
   Priority: Medium
   Steps:
     1. Try to upload 10MB image
   Expected: Error message about file size limit

‚úÖ Ready for Development: 65%

---
Generated by FirstQA - AI-powered QA analysis
```

## Permissions Required

FirstQA needs these Jira permissions:
- `read:jira-work` - Read ticket details
- `read:jira-user` - Get user information
- `offline_access` - Refresh access token

## Troubleshooting

### Webhook Not Firing

**Issue:** Comment `/qa` but no analysis appears

**Solutions:**
1. Check that Jira integration is connected in dashboard
2. Verify you have permissions to comment on the ticket
3. Try disconnecting and reconnecting Jira
4. Check Jira admin settings ‚Üí Webhooks to verify webhook exists

### Analysis Fails

**Issue:** Error message instead of analysis

**Solutions:**
1. Check that the ticket has a description (required)
2. Verify your Jira access token hasn't expired (auto-refreshes)
3. Try again in a few seconds (API rate limit)

### Not Seeing History

**Issue:** Analysis posted to Jira but not in dashboard

**Solutions:**
1. Log out and log back in to sync accounts
2. Refresh the history page
3. Check that you're logged in with the same account that connected Jira

## Technical Details

### Webhook Events

FirstQA listens for:
- `comment_created` - When a comment is added to any issue

### API Endpoints

- `POST /jira/webhook` - Receives Jira webhooks
- `GET /jira/install` - Initiates OAuth flow
- `GET /jira/callback` - Handles OAuth callback

### Database

Jira analyses are stored in the `analyses` table:
- `provider` = 'jira'
- `repository` = Jira issue key (e.g., "PROJ-123")
- `pr_number` = 0 (not a PR)
- `pr_title` = Ticket summary
- `pr_url` = Link to Jira ticket
- `result` = AI analysis JSON

## Comparison: GitHub vs Jira

| Feature | GitHub | Jira |
|---------|--------|------|
| **Trigger** | Comment `/qa` on PR | Comment `/qa` on ticket |
| **Analyzes** | PR diff, commits, description | Ticket description, comments, labels |
| **Output** | GitHub comment | Jira comment |
| **Tracked in Dashboard** | ‚úÖ Yes | ‚úÖ Yes |
| **Automatic on Create** | ‚ùå No (command-based) | ‚ùå No (command-based) |

## Roadmap

Future enhancements:
- [ ] Analyze ticket on creation/update (optional setting)
- [ ] Link GitHub PRs to Jira tickets
- [ ] Bulk ticket analysis
- [ ] Custom analysis templates
- [ ] Jira ticket creation from FirstQA

## Support

Need help?
- Email: support@firstqa.dev
- Docs: https://firstqa.dev/docs
- GitHub: https://github.com/ovidon83/firstqa

---

*Last Updated: January 2026*
